<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–ø–ª–∞—Ç–∞ –Ω–µ –ø—Ä–æ—à–ª–∞ - MiniApp.Expert</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="alternate icon" href="/favicon.ico" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563eb',
                        secondary: '#7c3aed',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen">
    <div class="container mx-auto px-4 py-16">
        <div class="max-w-2xl mx-auto">
            <!-- Failed Icon -->
            <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center w-24 h-24 bg-red-100 rounded-full mb-6 animate-pulse">
                    <svg class="w-12 h-12 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </div>
                <h1 class="text-4xl font-bold text-gray-900 mb-4">–û–ø–ª–∞—Ç–∞ –Ω–µ –ø—Ä–æ—à–ª–∞</h1>
                <p class="text-xl text-gray-600">–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ–ø–ª–∞—Ç—É</p>
            </div>

            <!-- Failed Card -->
            <div class="bg-white rounded-3xl shadow-xl p-8 mb-8">
                <div class="border-l-4 border-red-500 pl-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-900 mb-2">–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?</h2>
                    <p class="text-gray-600" id="errorMessage">
                        –û–ø–ª–∞—Ç–∞ –±—ã–ª–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞ –∏–ª–∏ –Ω–µ –ø—Ä–æ—à–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –±–∞–Ω–∫–∞. –≠—Ç–æ –º–æ–≥–ª–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º.
                    </p>
                </div>

                <!-- Order Info -->
                <div class="bg-gray-50 rounded-xl p-6 mb-6" id="orderInfo" style="display: none;">
                    <h3 class="font-semibold text-gray-900 mb-3">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ:</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞:</span>
                            <span class="font-mono text-gray-900" id="orderId">-</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">–ü—Ä–æ–¥—É–∫—Ç:</span>
                            <span class="text-gray-900" id="productName">-</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">–°—É–º–º–∞:</span>
                            <span class="font-bold text-gray-900" id="amount">-</span>
                        </div>
                    </div>
                </div>

                <!-- Possible Reasons -->
                <div class="mb-6">
                    <h3 class="font-semibold text-gray-900 mb-3">–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:</h3>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <svg class="w-5 h-5 text-red-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-gray-700">–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –∫–∞—Ä—Ç–µ</span>
                        </li>
                        <li class="flex items-start">
                            <svg class="w-5 h-5 text-red-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-gray-700">–ö–∞—Ä—Ç–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –∏–ª–∏ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–∞</span>
                        </li>
                        <li class="flex items-start">
                            <svg class="w-5 h-5 text-red-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-gray-700">–ù–µ–≤–µ—Ä–Ω—ã–π CVV –∫–æ–¥ –∏–ª–∏ SMS –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</span>
                        </li>
                        <li class="flex items-start">
                            <svg class="w-5 h-5 text-red-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-gray-700">–û–ø–ª–∞—Ç–∞ –±—ã–ª–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞ –≤–∞–º–∏</span>
                        </li>
                        <li class="flex items-start">
                            <svg class="w-5 h-5 text-red-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-gray-700">–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ –∫–∞—Ä—Ç–µ</span>
                        </li>
                    </ul>
                </div>

                <!-- What to do -->
                <div class="bg-blue-50 rounded-xl p-6 mb-6">
                    <h3 class="font-semibold text-gray-900 mb-3 flex items-center">
                        <svg class="w-5 h-5 text-blue-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ?
                    </h3>
                    <ul class="space-y-2 text-gray-700">
                        <li class="flex items-start">
                            <span class="text-blue-600 mr-2">1.</span>
                            <span>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-blue-600 mr-2">2.</span>
                            <span>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥—É—é –∫–∞—Ä—Ç—É</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-blue-600 mr-2">3.</span>
                            <span>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –±–∞–Ω–∫–æ–º –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω—ã</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-blue-600 mr-2">4.</span>
                            <span>–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –Ω–∞—à—É –ø–æ–¥–¥–µ—Ä–∂–∫—É, –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è</span>
                        </li>
                    </ul>
                </div>

                <!-- Actions -->
                <div class="space-y-3">
                    <button onclick="retryPayment()" class="w-full bg-gradient-to-r from-primary to-secondary text-white py-4 rounded-xl font-bold text-lg hover:shadow-xl transition transform hover:-translate-y-0.5">
                        üîÑ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
                    </button>
                    
                    <a href="https://t.me/miniappexpert" target="_blank" class="block w-full bg-gray-100 text-gray-900 py-4 rounded-xl font-bold text-lg hover:bg-gray-200 transition text-center">
                        üí¨ –°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
                    </a>
                    
                    <a href="/" class="block w-full text-center text-gray-600 hover:text-primary transition py-2">
                        ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é
                    </a>
                </div>
            </div>

            <!-- Help Section -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <h3 class="font-bold text-gray-900 mb-3">–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?</h3>
                <p class="text-gray-600 mb-4">
                    –ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤–∞ –ø–æ–º–æ—á—å –≤–∞–º –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–∫–∞–∑. –ú—ã —Ä–∞–±–æ—Ç–∞–µ–º 24/7 –∏ –æ—Ç–≤–µ—Ç–∏–º –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç.
                </p>
                <div class="flex flex-wrap gap-3">
                    <a href="https://t.me/miniappexpert" target="_blank" class="flex items-center text-primary hover:text-secondary transition">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        Telegram
                    </a>
                    <a href="mailto:support@miniapp.expert" class="flex items-center text-primary hover:text-secondary transition">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                        </svg>
                        Email
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const orderId = urlParams.get('orderId');
        const error = urlParams.get('error');
        const product = urlParams.get('product') || 'Mini App –¥–ª—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏';
        const amount = urlParams.get('amount') || urlParams.get('price');

        // Display order info if available
        if (orderId) {
            document.getElementById('orderInfo').style.display = 'block';
            document.getElementById('orderId').textContent = orderId;
            document.getElementById('productName').textContent = product;
            
            if (amount) {
                document.getElementById('amount').textContent = 
                    parseInt(amount).toLocaleString('ru-RU') + ' ‚ÇΩ';
            }
        }

        // Customize error message based on error type
        if (error === 'cancelled') {
            document.getElementById('errorMessage').textContent = 
                '–í—ã –æ—Ç–º–µ–Ω–∏–ª–∏ –æ–ø–ª–∞—Ç—É. –ï—Å–ª–∏ —ç—Ç–æ –±—ã–ª–∞ –æ—à–∏–±–∫–∞, –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞.';
        } else if (error === 'timeout') {
            document.getElementById('errorMessage').textContent = 
                '–í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ–ø–ª–∞—Ç—ã –∏—Å—Ç–µ–∫–ª–æ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.';
        } else if (error === 'declined') {
            document.getElementById('errorMessage').textContent = 
                '–ë–∞–Ω–∫ –æ—Ç–∫–ª–æ–Ω–∏–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –≤–∞—à–∏–º –±–∞–Ω–∫–æ–º –∏–ª–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥—É—é –∫–∞—Ä—Ç—É.';
        }

        // Retry payment function
        function retryPayment() {
            // Get saved order data
            const savedOrder = localStorage.getItem('pendingOrder');
            
            if (savedOrder) {
                try {
                    const order = JSON.parse(savedOrder);
                    // Redirect to payment page with saved data
                    window.location.href = `/payment.html?product=${encodeURIComponent(order.product || product)}&price=${order.price || amount}&company=${encodeURIComponent(order.companyName || '')}&email=${encodeURIComponent(order.email || '')}&phone=${encodeURIComponent(order.phone || '')}`;
                } catch (e) {
                    console.error('Error loading saved order:', e);
                    // Fallback to solution page
                    window.location.href = '/real-estate-solution.html';
                }
            } else if (orderId) {
                // Try to redirect to payment with order ID
                window.location.href = `/payment.html?orderId=${orderId}`;
            } else {
                // Fallback to solution page
                window.location.href = '/real-estate-solution.html';
            }
        }

        // Save failure event to analytics (if needed)
        const failureData = {
            orderId: orderId,
            error: error,
            timestamp: new Date().toISOString(),
            product: product,
            amount: amount
        };

        try {
            const failures = JSON.parse(localStorage.getItem('paymentFailures') || '[]');
            failures.push(failureData);
            localStorage.setItem('paymentFailures', JSON.stringify(failures));
        } catch (e) {
            console.error('Error saving failure data:', e);
        }
    </script>
</body>
</html>

