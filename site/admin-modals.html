<!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è –∞–¥–º–∏–Ω–∫–∏ -->

<!-- Universal Modal -->
<div id="universalModal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="sticky top-0 bg-white border-b border-gray-200 px-8 py-6 rounded-t-3xl">
            <div class="flex items-center justify-between">
                <h2 id="modalTitle" class="text-2xl font-bold">–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ</h2>
                <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 text-3xl leading-none">
                    √ó
                </button>
            </div>
        </div>
        <div id="modalContent" class="p-8">
            <!-- Content will be injected here -->
        </div>
    </div>
</div>

<!-- Add/Edit Case Modal -->
<template id="caseFormTemplate">
    <form id="caseForm" class="space-y-6">
        <input type="hidden" id="caseId">
        
        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–µ–π—Å–∞ *</label>
            <input 
                type="text" 
                id="caseTitle" 
                required
                class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-primary outline-none"
                placeholder="Mosca Caff√®"
            >
        </div>

        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
            <textarea 
                id="caseDescription" 
                required
                rows="4"
                class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-primary outline-none resize-none"
                placeholder="–°–µ—Ç—å –∫–æ—Ñ–µ–µ–Ω —Å –ø—Ä–æ–≥—Ä–∞–º–º–æ–π –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏"
            ></textarea>
        </div>

        <div class="grid grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">–ò–∫–æ–Ω–∫–∞ (emoji)</label>
                <input 
                    type="text" 
                    id="caseIcon" 
                    maxlength="2"
                    class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-primary outline-none text-3xl text-center"
                    placeholder="‚òï"
                >
            </div>
            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">–î–∞—Ç–∞</label>
                <input 
                    type="date" 
                    id="caseDate" 
                    class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-primary outline-none"
                >
            </div>
        </div>

        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
            <input 
                type="url" 
                id="caseLink" 
                class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-primary outline-none"
                placeholder="https://t.me/bot/app"
            >
        </div>

        <div class="flex gap-3">
            <button type="submit" class="flex-1 bg-gradient-to-r from-primary to-secondary text-white py-4 rounded-xl font-bold hover:shadow-xl transition">
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
            </button>
            <button type="button" onclick="closeModal()" class="px-8 border-2 border-gray-300 rounded-xl font-bold hover:bg-gray-50 transition">
                –û—Ç–º–µ–Ω–∞
            </button>
        </div>
    </form>
</template>

<!-- Add/Edit Solution Modal -->
<template id="solutionFormTemplate">
    <form id="solutionForm" class="space-y-6">
        <input type="hidden" id="solutionId">
        
        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è *</label>
            <input 
                type="text" 
                id="solutionTitle" 
                required
                class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-primary outline-none"
                placeholder="Mini App –¥–ª—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏"
            >
        </div>

        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
            <textarea 
                id="solutionDescription" 
                required
                rows="4"
                class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-primary outline-none resize-none"
                placeholder="–ö–∞—Ç–∞–ª–æ–≥ –æ–±—ä–µ–∫—Ç–æ–≤, —Ñ–∏–ª—å—Ç—Ä—ã, –∑–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä..."
            ></textarea>
        </div>

        <div class="grid grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">–¶–µ–Ω–∞ *</label>
                <input 
                    type="text" 
                    id="solutionPrice" 
                    required
                    class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-primary outline-none"
                    placeholder="–æ—Ç 150K‚ÇΩ"
                >
            </div>
            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">–ò–∫–æ–Ω–∫–∞ (emoji)</label>
                <input 
                    type="text" 
                    id="solutionIcon" 
                    maxlength="2"
                    class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-primary outline-none text-3xl text-center"
                    placeholder="üè¢"
                >
            </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">–°—Ä–æ–∫ –∑–∞–ø—É—Å–∫–∞</label>
                <input 
                    type="text" 
                    id="solutionLaunchTime" 
                    class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-primary outline-none"
                    placeholder="2-3 –¥–Ω—è"
                >
            </div>
            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">–°—Ç–∞—Ç—É—Å</label>
                <select 
                    id="solutionAvailable" 
                    class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-primary outline-none"
                >
                    <option value="true">‚úÖ –î–æ—Å—Ç—É–ø–µ–Ω</option>
                    <option value="false">‚è≥ –°–∫–æ—Ä–æ</option>
                </select>
            </div>
        </div>

        <div class="flex gap-3">
            <button type="submit" class="flex-1 bg-gradient-to-r from-primary to-secondary text-white py-4 rounded-xl font-bold hover:shadow-xl transition">
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
            </button>
            <button type="button" onclick="closeModal()" class="px-8 border-2 border-gray-300 rounded-xl font-bold hover:bg-gray-50 transition">
                –û—Ç–º–µ–Ω–∞
            </button>
        </div>
    </form>
</template>

<!-- Add/Edit User Modal -->
<template id="userFormTemplate">
    <form id="userForm" class="space-y-6">
        <input type="hidden" id="userId">
        
        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è *</label>
            <input 
                type="text" 
                id="userName" 
                required
                class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-primary outline-none"
                placeholder="–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤"
            >
        </div>

        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">Email *</label>
            <input 
                type="email" 
                id="userEmail" 
                required
                class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-primary outline-none"
                placeholder="ivan@example.com"
            >
        </div>

        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">–¢–µ–ª–µ—Ñ–æ–Ω</label>
            <input 
                type="tel" 
                id="userPhone" 
                class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-primary outline-none"
                placeholder="+7 (999) 123-45-67"
            >
        </div>

        <div class="flex gap-3">
            <button type="submit" class="flex-1 bg-gradient-to-r from-primary to-secondary text-white py-4 rounded-xl font-bold hover:shadow-xl transition">
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
            </button>
            <button type="button" onclick="closeModal()" class="px-8 border-2 border-gray-300 rounded-xl font-bold hover:bg-gray-50 transition">
                –û—Ç–º–µ–Ω–∞
            </button>
        </div>
    </form>
</template>

<!-- Manage Products Modal -->
<template id="manageProductsTemplate">
    <div id="manageProductsContent">
        <p class="text-gray-600 mb-6">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
        <div class="space-y-3" id="productCheckboxes">
            <!-- Will be populated dynamically -->
        </div>
        <div class="mt-6 flex gap-3">
            <button onclick="saveUserProducts()" class="flex-1 bg-primary text-white py-4 rounded-xl font-bold hover:bg-primary/90 transition">
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
            </button>
            <button onclick="closeModal()" class="px-8 border-2 border-gray-300 rounded-xl font-bold hover:bg-gray-50 transition">
                –û—Ç–º–µ–Ω–∞
            </button>
        </div>
    </div>
</template>

<!-- Manage Subscriptions Modal -->
<template id="manageSubscriptionsTemplate">
    <div id="manageSubscriptionsContent">
        <p class="text-gray-600 mb-6">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
        <div class="space-y-3" id="subscriptionCheckboxes">
            <!-- Will be populated dynamically -->
        </div>
        <div class="mt-6 flex gap-3">
            <button onclick="saveUserSubscriptions()" class="flex-1 bg-secondary text-white py-4 rounded-xl font-bold hover:bg-secondary/90 transition">
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
            </button>
            <button onclick="closeModal()" class="px-8 border-2 border-gray-300 rounded-xl font-bold hover:bg-gray-50 transition">
                –û—Ç–º–µ–Ω–∞
            </button>
        </div>
    </div>
</template>

