# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–æ–∫

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–í–∞—à API –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –Ω–∞: `http://127.0.0.1:8000`

## üîë –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ Bearer —Ç–æ–∫–µ–Ω

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: http://127.0.0.1:8000/ru/admin/leads/apitoken/
2. –ù–∞–∂–º–∏—Ç–µ **"–î–æ–±–∞–≤–∏—Ç—å API —Ç–æ–∫–µ–Ω"**
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
4. –£–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ: "Rello Telegram Mini App"
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ
6. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω** (64 —Å–∏–º–≤–æ–ª–∞)

## üìù –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –ó–∞–º–µ–Ω–∏—Ç–µ `your_bearer_token_here` –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω:

```env
# API Configuration
VITE_API_URL=http://127.0.0.1:8000/api/leads/create/
VITE_API_TOKEN=–≤–∞—à_–Ω–∞—Å—Ç–æ—è—â–∏–π_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å_64_—Å–∏–º–≤–æ–ª–∞
```

**–ü—Ä–∏–º–µ—Ä:**
```env
VITE_API_URL=http://127.0.0.1:8000/api/leads/create/
VITE_API_TOKEN=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0e1f2
```

## üîÑ –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è .env —Ñ–∞–π–ª–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Vite:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å
pkill -f vite

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
npm run dev -- --host 0.0.0.0
```

## üì° –ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ API

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:

```json
{
  "first_name": "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram",
  "last_name": "–§–∞–º–∏–ª–∏—è –∏–∑ Telegram",
  "phone": "+7 999 123 45 67",
  "telegram": "@username –∏–ª–∏ nickname –∏–∑ —Ñ–æ—Ä–º—ã",
  "client_language": "ru",
  "description": "–ó–∞—è–≤–∫–∞ –∏–∑ Telegram Mini App. Platform: tdesktop, User ID: 123456789",
  "comment": "{\"telegram_user_id\":123456789,\"username\":\"user\",\"is_premium\":false,...}"
}
```

### –ü–æ–ª—è:

- **first_name** - –∏–º—è –∏–∑ Telegram
- **last_name** - —Ñ–∞–º–∏–ª–∏—è –∏–∑ Telegram
- **phone** - –Ω–æ–º–µ—Ä –∏–∑ —Ñ–æ—Ä–º—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- **telegram** - –Ω–∏–∫–Ω–µ–π–º –∏–∑ —Ñ–æ—Ä–º—ã –∏–ª–∏ username –∏–∑ Telegram
- **client_language** - —è–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (ru/en)
- **description** - –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- **comment** - JSON —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API –∑–∞–ø—É—â–µ–Ω:

```bash
curl http://127.0.0.1:8000/api/leads/info/
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± API.

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω:

```bash
curl -X POST http://127.0.0.1:8000/api/leads/create/ \
  -H "Authorization: Bearer –≤–∞—à_—Ç–æ–∫–µ–Ω" \
  -H "Content-Type: application/json" \
  -d '{"phone": "+79991234567", "first_name": "Test"}'
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "success": true,
  "lead_id": 123,
  "message": "–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞"
}
```

### 3. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ —Ñ–æ—Ä–º–µ
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω–∫—É: http://127.0.0.1:8000/ru/admin/leads/lead/
5. –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è

## üîç –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –±—É–¥—É—Ç –ª–æ–≥–∏:

```
üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏ –Ω–∞ API: {...}
üîß API URL: http://127.0.0.1:8000/api/leads/create/
üîß Token exists: true
üì° Response status: 201
‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç API: {...}
```

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏

### "API URL –∏–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ç–æ–∫–µ–Ω –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

### "HTTP 401 Unauthorized"
- –¢–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å Bearer

### "HTTP 403 Forbidden"
- –¢–æ–∫–µ–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–π
- –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω –≤ –∞–¥–º–∏–Ω–∫–µ

### "HTTP 400 Bad Request"
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

## üåê Production –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–î–ª—è production –∏–∑–º–µ–Ω–∏—Ç–µ URL –≤ .env:

```env
VITE_API_URL=https://your-domain.com/api/leads/create/
VITE_API_TOKEN=production_token_here
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- API Documentation: http://127.0.0.1:8000/api/leads/info/
- Admin Panel: http://127.0.0.1:8000/ru/admin/
- Tokens Management: http://127.0.0.1:8000/ru/admin/leads/apitoken/
