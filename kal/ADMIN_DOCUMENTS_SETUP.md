# Инструкция: Настройка документов в админке

## Шаг 1: Создание документов

### 1.1. Политика конфиденциальности (уже создана)
- Тип: `privacy`
- Статус: ✅ Создана и опубликована

### 1.2. Условия партнерской программы
1. Зайти в админку: `https://miniapp.expert/admin/documents/document/`
2. Нажать "Добавить документ"
3. Заполнить:
   - **Тип документа**: `Условия партнерской программы` (affiliate_terms)
   - **Заголовок**: "Условия партнерской программы"
   - **Содержание (HTML)**: Вставить HTML с условиями
   - **Содержание (текст)**: Текстовая версия для поиска
   - **Meta title**: "Условия партнерской программы - MiniAppExpert"
   - **Meta description**: Описание для SEO
   - **Активен**: ✅
   - **Опубликован**: ✅
4. Сохранить

### 1.3. Условия использования ЛК
1. Зайти в админку: `https://miniapp.expert/admin/documents/document/`
2. Нажать "Добавить документ"
3. Заполнить:
   - **Тип документа**: `Условия использования личного кабинета` (cabinet_terms)
   - **Заголовок**: "Условия использования личного кабинета"
   - **Содержание (HTML)**: Вставить HTML с условиями
   - **Содержание (текст)**: Текстовая версия для поиска
   - **Meta title**: "Условия использования ЛК - MiniAppExpert"
   - **Meta description**: Описание для SEO
   - **Активен**: ✅
   - **Опубликован**: ✅
4. Сохранить

### 1.4. Условия подписки (для каждого продукта)
1. Зайти в админку: `https://miniapp.expert/admin/documents/document/`
2. Нажать "Добавить документ"
3. Заполнить:
   - **Тип документа**: `Условия подписки` (subscription_terms)
   - **Заголовок**: "Условия подписки - [Название продукта]" (например, "Условия подписки - Старт")
   - **Содержание (HTML)**: Вставить HTML с условиями подписки для конкретного продукта
   - **Содержание (текст)**: Текстовая версия для поиска
   - **Meta title**: "Условия подписки - [Название продукта] - MiniAppExpert"
   - **Meta description**: Описание для SEO
   - **Активен**: ✅
   - **Опубликован**: ✅
4. Сохранить
5. Повторить для каждого продукта-подписки:
   - Mini App для недвижимости - Старт
   - Mini App для недвижимости - Бизнес
   - Mini App для недвижимости - Корпоративный

## Шаг 2: Назначение условий подписки продуктам

1. Зайти в админку: `https://miniapp.expert/admin/products/product/`
2. Открыть продукт-подписку (например, "Mini App для недвижимости - Старт")
3. В разделе "Условия подписки" выбрать документ с условиями подписки для этого продукта
4. Сохранить
5. Повторить для каждого продукта-подписки

## Шаг 3: Проверка

### 3.1. Проверка API
```bash
# Политика конфиденциальности
curl https://miniapp.expert/api/documents/privacy/

# Условия партнерской программы
curl https://miniapp.expert/api/documents/affiliate_terms/

# Условия использования ЛК
curl https://miniapp.expert/api/documents/cabinet_terms/

# Условия подписки
curl https://miniapp.expert/api/documents/subscription_terms/
```

### 3.2. Проверка страницы оплаты
1. Создать предзаказ для продукта-подписки
2. Открыть `/payment.html?pre_order_id=<uuid>`
3. Проверить, что:
   - Отображается чекбокс "Я согласен с условиями подписки"
   - Есть ссылка "(подробнее)" на условия подписки
   - Ссылка ведет на правильный документ из админки

## Примечания

- Все документы должны быть опубликованы (`is_published=True`) и активны (`is_active=True`)
- Документы доступны через API (`/api/documents/<document_type>/`) и через статические URL (`/privacy.html`, `/affiliate-terms.html`, и т.д.)
- Если для продукта не назначены условия подписки, используется общий документ `/subscription-terms.html`
- HTML контент документов может содержать любые HTML теги и классы Tailwind CSS

