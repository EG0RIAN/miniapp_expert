# üéâ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∫–∏ –∏ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ - –ò—Ç–æ–≥–∏

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –º–æ–¥–µ–ª–∏)

#### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- ‚úÖ **payment_methods** - —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–ª—è MIT
  - –ü–æ–ª—è: rebill_id, pan_mask, exp_date, status, is_default
- ‚úÖ **mandates** - –º–∞–Ω–¥–∞—Ç—ã –Ω–∞ –±–µ–∑–∞–∫—Ü–µ–ø—Ç–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ (–†–ö–û)
  - –ü–æ–ª—è: mandate_number, bank, signed_at, status, file_url
- ‚úÖ **manual_charges** - —Ä—É—á–Ω—ã–µ —Å–ø–∏—Å–∞–Ω–∏—è
  - –ü–æ–ª—è: amount, currency, reason, channel (MIT/–†–ö–û), status, provider_ref
- ‚úÖ **audit_logs** - –∂—É—Ä–Ω–∞–ª –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
  - –ü–æ–ª—è: entity, entity_id, action, actor_email, before, after, ip_address

#### –ú–æ–¥–µ–ª–∏ AdonisJS:
- ‚úÖ `PaymentMethod`
- ‚úÖ `Mandate`
- ‚úÖ `ManualCharge`
- ‚úÖ `AuditLog`

### 2. Backend API (AdonisJS)

#### T-Bank Service (`app/services/tbank_service.ts`)
- ‚úÖ `initPayment()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è CIT –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –∫–∞—Ä—Ç—ã
- ‚úÖ `chargeMIT()` - —Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π –∫–∞—Ä—Ç–µ
- ‚úÖ `getPaymentStatus()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞
- ‚úÖ `verifyWebhookSignature()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ –≤–µ–±—Ö—É–∫–∞
- ‚úÖ `generateRKOPaymentOrder()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞—Ç—ë–∂–Ω–æ–≥–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (CSV)

#### Admin Controllers

**CustomersController** (`app/controllers/admin/customers_controller.ts`)
- ‚úÖ `GET /api/admin/customers` - —Å–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- ‚úÖ `GET /api/admin/customers/:id` - –¥–µ—Ç–∞–ª–∏ –∫–ª–∏–µ–Ω—Ç–∞ (–ø—Ä–æ–¥—É–∫—Ç—ã, –ø–ª–∞—Ç–µ–∂–∏, –º–µ—Ç–æ–¥—ã, –º–∞–Ω–¥–∞—Ç—ã)
- ‚úÖ `PATCH /api/admin/customers/:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞

**ManualChargesController** (`app/controllers/admin/manual_charges_controller.ts`)
- ‚úÖ `GET /api/admin/manual-charges` - —Å–ø–∏—Å–æ–∫ —Ä—É—á–Ω—ã—Ö —Å–ø–∏—Å–∞–Ω–∏–π
- ‚úÖ `POST /api/admin/manual-charges` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ø–∏—Å–∞–Ω–∏—è (MIT/–†–ö–û)
- ‚úÖ `GET /api/admin/manual-charges/:id` - –¥–µ—Ç–∞–ª–∏ —Å–ø–∏—Å–∞–Ω–∏—è
- ‚úÖ `POST /api/admin/manual-charges/:id/cancel` - –æ—Ç–º–µ–Ω–∞ —Å–ø–∏—Å–∞–Ω–∏—è

**MandatesController** (`app/controllers/admin/mandates_controller.ts`)
- ‚úÖ `GET /api/admin/mandates` - —Å–ø–∏—Å–æ–∫ –º–∞–Ω–¥–∞—Ç–æ–≤
- ‚úÖ `POST /api/admin/mandates` - —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞–Ω–¥–∞—Ç–∞
- ‚úÖ `GET /api/admin/mandates/:id` - –¥–µ—Ç–∞–ª–∏ –º–∞–Ω–¥–∞—Ç–∞
- ‚úÖ `PATCH /api/admin/mandates/:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–Ω–¥–∞—Ç–∞
- ‚úÖ `POST /api/admin/mandates/:id/revoke` - –æ—Ç–∑—ã–≤ –º–∞–Ω–¥–∞—Ç–∞

**AuditLogsController** (`app/controllers/admin/audit_logs_controller.ts`)
- ‚úÖ `GET /api/admin/audit-log` - –∂—É—Ä–Ω–∞–ª –∞—É–¥–∏—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- ‚úÖ `GET /api/admin/audit-log/:id` - –¥–µ—Ç–∞–ª–∏ –ª–æ–≥–∞
- ‚úÖ `GET /api/admin/audit-log/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π

#### Client Controllers

**DashboardController** (`app/controllers/client/dashboard_controller.ts`)
- ‚úÖ `GET /api/client/dashboard` - –¥–∞—à–±–æ—Ä–¥ (–±–∞–ª–∞–Ω—Å, –ø—Ä–æ–¥—É–∫—Ç—ã, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Ä–µ—Ñ–µ—Ä–∞–ª—ã)

**ProductsController** (`app/controllers/client/products_controller.ts`)
- ‚úÖ `GET /api/client/products` - —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞
- ‚úÖ `POST /api/client/products/:id/renew` - –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ (MIT –∏–ª–∏ –æ–±—ã—á–Ω—ã–π –ø–ª–∞—Ç—ë–∂)

**PaymentsController** (`app/controllers/client/payments_controller.ts`)
- ‚úÖ `GET /api/client/payments` - –∏—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- ‚úÖ `GET /api/client/payments/:id/receipt` - –∫–≤–∏—Ç–∞–Ω—Ü–∏—è/—á–µ–∫

**PaymentMethodsController** (`app/controllers/client/payment_methods_controller.ts`)
- ‚úÖ `GET /api/client/payment-methods` - —Å–ø–∏—Å–æ–∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –∫–∞—Ä—Ç
- ‚úÖ `POST /api/client/payment-methods` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã (CIT)
- ‚úÖ `DELETE /api/client/payment-methods/:id` - —É–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã

**ReferralsController** (`app/controllers/client/referrals_controller.ts`)
- ‚úÖ `GET /api/client/referrals` - —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –∏—Å—Ç–æ—Ä–∏—è
- ‚úÖ `POST /api/client/referrals/request-payout` - –∑–∞–ø—Ä–æ—Å –≤—ã–ø–ª–∞—Ç—ã

**ProfilesController** (`app/controllers/client/profiles_controller.ts`)
- ‚úÖ `GET /api/client/profile` - –ø—Ä–æ—Ñ–∏–ª—å –∫–ª–∏–µ–Ω—Ç–∞
- ‚úÖ `PATCH /api/client/profile` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ `POST /api/client/profile/accept-offer` - –ø—Ä–∏–Ω—è—Ç–∏–µ –æ—Ñ–µ—Ä—Ç—ã

### 3. RBAC –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

#### Middleware
- ‚úÖ **AdminMiddleware** (`app/middleware/admin_middleware.ts`)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π: ADMIN, FINANCE_MANAGER
  - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

#### –†–æ—É—Ç—ã —Å –∑–∞—â–∏—Ç–æ–π
- ‚úÖ `/api/client/*` - —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∫–ª–∏–µ–Ω—Ç–∞
- ‚úÖ `/api/admin/*` - —Ç—Ä–µ–±—É–µ—Ç —Ä–æ–ª—å ADMIN –∏–ª–∏ FINANCE_MANAGER

#### –ê—É–¥–∏—Ç
- ‚úÖ –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∞–¥–º–∏–Ω–æ–≤ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `audit_logs`
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è: entity, action, actor, before/after, IP, user-agent

### 4. Frontend (React)

#### API Service (`src/services/api.ts`)
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /login –ø—Ä–∏ 401

#### Admin UI

**–°—Ç—Ä–∞–Ω–∏—Ü—ã:**
- ‚úÖ `AdminDashboard` - –≥–ª–∞–≤–Ω–∞—è –∞–¥–º–∏–Ω–∫–∏ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `ManualChargeModal` - –º–æ–¥–∞–ª –¥–ª—è —Ä—É—á–Ω—ã—Ö —Å–ø–∏—Å–∞–Ω–∏–π

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –í—ã–±–æ—Ä –∫–∞–Ω–∞–ª–∞ (MIT/–†–ö–û)
- –í—ã–±–æ—Ä –ø–ª–∞—Ç—ë–∂–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –∏–ª–∏ –º–∞–Ω–¥–∞—Ç–∞
- –í–≤–æ–¥ —Å—É–º–º—ã –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- 2FA –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

#### Client UI

**–°—Ç—Ä–∞–Ω–∏—Ü—ã:**
- ‚úÖ `ClientDashboard` - –¥–∞—à–±–æ—Ä–¥ –∫–ª–∏–µ–Ω—Ç–∞
  - –ë–∞–ª–∞–Ω—Å, –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã, —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥
  - –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º

**–†–∞–∑–¥–µ–ª—ã:**
- üì¶ –ú–æ–∏ –ø—Ä–æ–¥—É–∫—Ç—ã
- üí≥ –ü–ª–∞—Ç–µ–∂–∏
- üí∞ –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã
- üéÅ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
- üë§ –ü—Ä–æ—Ñ–∏–ª—å

### 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚úÖ **ADMIN_CLIENT_SETUP.md** - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î
  - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
  - API endpoints
  - RBAC –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
  - T-Bank –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
  - Frontend —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - Troubleshooting

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **Framework:** AdonisJS 6
- **ORM:** Lucid
- **Database:** PostgreSQL 15
- **Auth:** Access Tokens
- **Payments:** T-Bank API

### Frontend
- **Framework:** React 18
- **Router:** React Router v6
- **Styling:** Tailwind CSS
- **HTTP Client:** Fetch API

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  React Frontend ‚îÇ
‚îÇ  (Client/Admin) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ HTTPS
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  AdonisJS API   ‚îÇ
‚îÇ  (Port 3333)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ         ‚îÇ
    ‚ñº         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇPostgres‚îÇ ‚îÇ T-Bank   ‚îÇ
‚îÇ  DB    ‚îÇ ‚îÇ   API    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –ø–ª–∞—Ç–µ–∂–µ–π, –º–µ—Ç–æ–¥–æ–≤ –æ–ø–ª–∞—Ç—ã

2. **–†—É—á–Ω—ã–µ —Å–ø–∏—Å–∞–Ω–∏—è**
   - MIT (–ø–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º –∫–∞—Ä—Ç–∞–º)
   - –†–ö–û (–ø–æ –º–∞–Ω–¥–∞—Ç–∞–º)
   - 2FA –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

3. **–ú–∞–Ω–¥–∞—Ç—ã –†–ö–û**
   - –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
   - –ó–∞–≥—Ä—É–∑–∫–∞ PDF –¥–æ–≥–æ–≤–æ—Ä–æ–≤
   - –û—Ç–∑—ã–≤ –º–∞–Ω–¥–∞—Ç–æ–≤

4. **–ê—É–¥–∏—Ç**
   - –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—É—â–Ω–æ—Å—Ç—è–º, –∞–∫—Ç—ë—Ä–∞–º, –¥–∞—Ç–∞–º
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π

### –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤:
1. **–î–∞—à–±–æ—Ä–¥**
   - –ë–∞–ª–∞–Ω—Å –∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
   - –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
   - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

2. **–ü—Ä–æ–¥—É–∫—Ç—ã**
   - –°–ø–∏—Å–æ–∫ –ø—Ä–∏–æ–±—Ä–µ—Ç—ë–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
   - –ü—Ä–æ–¥–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ MIT –∏–ª–∏ –æ–±—ã—á–Ω—ã–π –ø–ª–∞—Ç—ë–∂

3. **–ü–ª–∞—Ç–µ–∂–∏**
   - –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
   - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏–π

4. **–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã**
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–∞—Ä—Ç

5. **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞**
   - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã—Ö
   - –ó–∞–ø—Ä–æ—Å –≤—ã–ø–ª–∞—Ç—ã

6. **–ü—Ä–æ—Ñ–∏–ª—å**
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - –ü—Ä–∏–Ω—è—Ç–∏–µ –æ—Ñ–µ—Ä—Ç—ã

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ RBAC (Role-Based Access Control)
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ 2FA –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (—Ä—É—á–Ω—ã–µ —Å–ø–∏—Å–∞–Ω–∏—è)
- ‚úÖ Audit log –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–µ–π T-Bank –≤–µ–±—Ö—É–∫–æ–≤
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ IP –∏ User-Agent

## üìà –ú–µ—Ç—Ä–∏–∫–∏

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- **–ú–∏–≥—Ä–∞—Ü–∏–∏:** 4 —Ñ–∞–π–ª–∞
- **–ú–æ–¥–µ–ª–∏:** 4 —Ñ–∞–π–ª–∞
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã:** 10 —Ñ–∞–π–ª–æ–≤ (6 client + 4 admin)
- **–°–µ—Ä–≤–∏—Å—ã:** 1 —Ñ–∞–π–ª (TBankService)
- **Middleware:** 1 —Ñ–∞–π–ª (AdminMiddleware)
- **Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** 3 —Ñ–∞–π–ª–∞
- **API Service:** 1 —Ñ–∞–π–ª
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** 2 —Ñ–∞–π–ª–∞

### Endpoints:
- **Client API:** 13 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- **Admin API:** 15 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- **–í—Å–µ–≥–æ:** 28 –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

1. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:**
```bash
cd api-adonis
node ace migration:run
```

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å T-Bank:**
   - –î–æ–±–∞–≤–∏—Ç—å `TBANK_TERMINAL_KEY` –∏ `TBANK_PASSWORD` –≤ `.env`
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook URL: `https://miniapp.expert/api/tbank/webhook`

3. **–ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º:**
```sql
UPDATE users SET role = 'ADMIN' WHERE email = 'admin@example.com';
```

4. **–°–æ–±—Ä–∞—Ç—å –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å frontend:**
```bash
npm run build
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å dist/ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
```

5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å 2FA –¥–ª—è –∞–¥–º–∏–Ω–æ–≤:**
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `npm install otplib`
   - –î–æ–±–∞–≤–∏—Ç—å `totp_secret` –≤ —Ç–∞–±–ª–∏—Ü—É `users`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é QR-–∫–æ–¥–æ–≤

## üìù –ó–∞–º–µ—Ç–∫–∏

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏:
- ‚úÖ –í—Å–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- ‚úÖ RBAC –∏ middleware
- ‚úÖ T-Bank –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (MIT –∏ –†–ö–û)
- ‚úÖ Audit logging
- ‚úÖ –ë–∞–∑–æ–≤—ã–π UI –¥–ª—è –∞–¥–º–∏–Ω–∫–∏ –∏ –∫–ª–∏–µ–Ω—Ç–∞

### –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:
- ‚ö†Ô∏è 2FA —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–Ω—É–∂–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ otplib)
- ‚ö†Ô∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF —á–µ–∫–æ–≤
- ‚ö†Ô∏è –ü–æ–ª–Ω—ã–π UI –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (—Å–æ–∑–¥–∞–Ω—ã —Ç–æ–ª—å–∫–æ –¥–∞—à–±–æ—Ä–¥—ã –∏ –º–æ–¥–∞–ª)
- ‚ö†Ô∏è Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚ö†Ô∏è Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üéì –û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–∏—Å—Ç–µ–º–æ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å:
1. –ö–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä—É—á–Ω—ã–µ —Å–ø–∏—Å–∞–Ω–∏—è (MIT/–†–ö–û)
2. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –º–∞–Ω–¥–∞—Ç–∞–º–∏
3. –ö–∞–∫ —á–∏—Ç–∞—Ç—å audit log
4. –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å—ã –ø–ª–∞—Ç–µ–∂–µ–π –≤ T-Bank

–î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤:
1. –ö–∞–∫ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫–∞—Ä—Ç—É
2. –ö–∞–∫ –ø—Ä–æ–¥–ª–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç
3. –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ Backend –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤, Frontend –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** 85%  
**–î–∞—Ç–∞:** 6 –Ω–æ—è–±—Ä—è 2025  
**–ê–≤—Ç–æ—Ä:** Cursor AI + –ï–≥–æ—Ä  
**–í–µ—Ä—Å–∏—è:** 1.0.0

