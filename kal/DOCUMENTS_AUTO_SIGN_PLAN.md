# План автоматического подписания документов

## Документы и их условия подписания:

1. **Политика конфиденциальности (privacy)**
   - Когда: При первом входе в ЛК
   - Где: На странице cabinet.html
   - Форма: Модальное окно с чекбоксом и кнопкой "Принять"

2. **Условия использования ЛК (cabinet_terms)**
   - Когда: При первом входе в ЛК
   - Где: На странице cabinet.html
   - Форма: Модальное окно с чекбоксом и кнопкой "Принять"

3. **Условия партнерской программы (affiliate_terms)**
   - Когда: При первом открытии раздела "Партнерская программа"
   - Где: На странице cabinet.html, раздел #partners
   - Форма: Уже реализована с чекбоксом и кнопкой "Принять условия"

4. **Условия подписки (subscription_terms)**
   - Когда: При первом оформлении подписки (нажатие на кнопку оплаты)
   - Где: На странице payment.html
   - Форма: Модальное окно с чекбоксом и кнопкой "Принять и продолжить"

## Реализация:

### 1. В cabinet.js:
- При первой загрузке проверять, подписаны ли `privacy` и `cabinet_terms`
- Если не подписаны - показать модальное окно с формой для каждого документа
- Форма должна содержать:
  - Заголовок с названием документа
  - Ссылку на полный текст документа
  - Чекбокс "Я ознакомился и принимаю условия"
  - Кнопку "Принять"
  - Кнопку "Отмена" (закрыть модальное окно, но документ останется неподписанным)

### 2. В payment.html:
- При нажатии на кнопку оплаты проверять, подписан ли `subscription_terms`
- Если не подписан - показать модальное окно с формой
- Форма должна содержать:
  - Заголовок с названием документа
  - Ссылку на полный текст документа
  - Чекбокс "Я ознакомился и принимаю условия подписки"
  - Кнопку "Принять и продолжить оплату"
  - Кнопку "Отмена"

### 3. API:
- Использовать существующий endpoint: `POST /api/client/documents/accept/<document_type>/`
- После успешного подписания продолжать выполнение действия (вход в ЛК или оформление подписки)

## Порядок подписания:

1. При первом входе в ЛК:
   - Сначала показывается форма для "Политика конфиденциальности"
   - После подписания показывается форма для "Условия использования ЛК"
   - После подписания обоих документов пользователь может пользоваться ЛК

2. При первом открытии раздела "Партнерская программа":
   - Показывается форма для "Условия партнерской программы" (уже реализовано)
   - После подписания пользователь может использовать раздел

3. При первом оформлении подписки:
   - Показывается форма для "Условия подписки"
   - После подписания пользователь может продолжить оплату

